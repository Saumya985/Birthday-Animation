
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;font-family:system-ui,Arial,sans-serif;background:hsl(300, 21%, 67%);color:hsl(300 20% 20%);}

.cake{
    background: white;
    border-radius: 10px;
    position: relative;
    width: 160px;
    height: calc((40px * 3)+85px);
    z-index: 6;
    transform-origin: center bottom;

}
.fireworks{
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 5;
  overflow: hidden;
}
.fireworks span{
  position: absolute;
  width: 26px;
  height: 26px;
  background: rgb(156, 61, 61);
  border-radius: 50%;
  opacity: 0;
  animation: cracker 1s ease-out forwards;
}

.container{
  display:flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height:100%; /* or 100vh for full screen*/
  position:relative;
  overflow:hidden;
  perspective:800px;
}

#deco1{
  position: absolute;
  top: 0;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(132, 169, 202);
  border: #2b3095 solid 3.5px;
  z-index: 1;
}
#deco2{
  position: absolute;
  top: 0;
  left: 300px;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(47, 90, 127);
  border: #181a86 solid 3.5px;
  z-index: 1;
}
#deco3{
  position: absolute;
  top: 0;
  left: 600px;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(132, 169, 202);
  border: #2b3095 solid 3.5px;
  z-index: 1;
}
#deco4{
  position: absolute;
  top: 0;
  left: 900px;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(47, 90, 127);
  border: #181a86 solid 3.5px;
  z-index: 1;
}
#deco5{
  position: absolute;
  top: 0;
  left: 1200px;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(132, 169, 202);
  border: #2b3095 solid 3.5px;
  z-index: 1;
}
#deco6{
  position: absolute;
  top: 0;
  left: 1500px;
  height: 180px;
  width: 300px;
  border-radius: 50%;
  border-top-right-radius: 5%;
  border-top-left-radius: 5%;
  background-color: rgb(47, 90, 127);
  border: #181a86 solid 3.5px;
  z-index: 1;
}

.bottom-layer, .mid-layer, .top-layer, .choco-layer1, .choco-layer2, .candle{
    position: absolute;
    left: 0;
    width: 100%;
    height: 40px;
    border:2px solid rgba(0,0,0,.05);
    border-radius: 5px;
    opacity: 0;

}

.bottom-layer{
    bottom: 0;
    height: 40px;
    background-color:rgb(236, 72, 157);
    animation: bottom 1200ms ease-out forwards;
}

.mid-layer{
    bottom: 50px;
    height: 40px;
    background-color: rgb(240, 96, 160);
    transform:scaleX(.85);
    margin-inline:auto;
    animation: mid 1200ms ease-out forwards;
    animation-delay: 2.5s;
}
.choco-layer1{
  position: absolute;
  bottom: 40px;
  height: 10px;
  width: 100%;
  border-radius: 8%;
  background-color: rgb(67, 45, 16);
  transform: scaleX(.85);
    animation: choco1 1200ms ease-out forwards;
    animation-delay: 1.2s;
}
.choco-layer2{
  position: absolute;
  bottom: 90px;
  height: 10px;
  width: 100%;
  border-radius: 8%;
  background-color: rgb(67, 45, 16);
  transform:scaleX(.70);
  animation: choco2 1200ms ease-out forwards;
  animation-delay: 3.4s;
}
.top-layer{
    bottom: 100px;
    height: 40px;
    background-color:rgb(248, 124, 176);
    transform:scaleX(.70);
    margin-inline:auto;
    animation: top 1200ms ease-out forwards;
    animation-delay: 4.6s;
}
.top-layer::before{
  content: "";
  position: absolute;
   width: 100%;
    height: 20px;
    left: 50%;
    transform: translateX(-50%);
      background:
        radial-gradient(circle at 10% 0, #fffaf0 10%, transparent 14%),
        radial-gradient(circle at 30% 0, #fffaf0 12%, transparent 16%),
        radial-gradient(circle at 50% 0, #fffaf0 16%, transparent 22%),
        radial-gradient(circle at 70% 0, #fffaf0 14%, transparent 19%),
        radial-gradient(circle at 90% 0, #fffaf0 10%, transparent 15%);
        animation: icing 900ms ease-out;
  }

.candle{
    position: absolute;
    left: 50%;
    bottom: 148px;
    height: 45px;
    width: 10px;
    background: rgba(197, 145, 145, 0.9);
    transform: translateX(-50%) translateY(10px);
    animation: candleRise 500ms ease-out 1400ms both;
    animation-delay: 5.6s;
    z-index: 2;
}
.flame {
  position: absolute;
  top: -24px;
  left: 50%;
  width: 16px;
  height: 24px;
  transform: translateX(-50%);
  background: 
  radial-gradient(circle at 50% 95%, rgb(255, 255, 217) 0 40%, transparent 41%),
  radial-gradient(circle at 50% 15%, rgb(255, 217, 102) 0 80%, transparent 1%),
  radial-gradient(circle at 70% 95%, rgb(231, 231, 126) 0 4%, transparent 81%);

  z-index: 3;
  animation:flameFlicker 190ms ease-in-out infinite alternate;
}

.smoke{
    position: absolute;
    top: -14px;
    left:50%;
    width:9px;
    height:18px;
    background:radial-gradient(circle,rgba(255,255,255,.8),rgba(200,200,200,.2) 70%,transparent 71%);
     transform:translateX(-50%) scale(.5);
  pointer-events:none;
  border-radius:30%;
  opacity: 1;
  z-index: 2;
}

.candle.out .flame{
  animation:none;
  opacity:0;
  transition:opacity 200ms ease;
}
.candle.out .smoke-1{
  animation:smokeRise 1.3s ease-out forwards; /*becz of forwards element remains in its last state*/
}
.candle.out .smoke-2{
  animation:smokeRise 1.8s ease-out 100ms forwards;
}

.cake:after, .cake::before{
    background: rgb(255, 0, 0, 0.4);
    content: "";
    position: absolute;
    width: 100%;
    height: 2.22222px;
}

.text{
  position: relative;
  color: #4d3e8f;
  top: 445px;
  text-align: center;
  font-family:cursive;
  opacity: 1;
  z-index: 8;
  animation: text 1600ms ease-out forwards;
}
@keyframes bottom{
    0%{transform: translateY(-900px) scale(1.3); opacity: 1;}
    30%{transform: translateY(0); opacity: 1;}
    75%{transform: translateY(-50px); opacity: 1;}
    100%{transform: translateY(0px); opacity: 1;}
    
}
@keyframes choco1{
    0%{transform: translateY(-900px) scale(.85); opacity: 1;}
    30%{transform: translateY(0) scale(.85); opacity: 1;}
    75%{transform: translateY(-30px) scaleX(.85); opacity: 1;}
    100%{transform: translateY(0px) scaleX(.85); opacity: 1;}
}
@keyframes mid{
    0%{transform: translateY(-900px) scale(.85); opacity: 1;}
    30%{transform: translateY(0) scale(.85); opacity: 1;}
    75%{transform: translateY(-30px) scaleX(.85); opacity: 1;}
    100%{transform: translateY(0px) scaleX(.85); opacity: 1;}
}
@keyframes choco2{
  0%{transform: translateY(-900px) scale(.70); opacity: 1;}
  30%{transform: translateY(-10px) scale(.70); opacity: 1;}
  75%{transform: translateY(-30px) scaleX(.70); opacity: 1;}
  100%{transform: translateY(0px) scaleX(.70); opacity: 1;}
}
@keyframes top{
    0%{transform: translateY(-900px) scaleX(.70); opacity: 1;}
    30%{transform: translateY(0) scaleX(.70); opacity: 1;}
    75%{transform: translateY(-30px) scaleX(.70); opacity: 1;}
    100%{transform: translateY(0px) scaleX(.70); opacity: 1;}
}
@keyframes candleRise{
  0%{transform:translateX(50%) translateY(-280px); opacity: 1;}
  100%{transform:translateX(-50%) translateY(10px); opacity: 1;}
}
@keyframes flameFlicker{
  0%{transform:translateX(-50%) scale(.55)}
  50%{transform:translateX(-50%) scale(1)}
  100%{transform:translateX(-50%) scale(1.15)}
}
@keyframes smokeRise{
  0%{opacity:0;transform:translateX(-50%) translateY(0) scale(.5);}
  10%{opacity:1;}
  80%{opacity: 0.6;transform:translateX(calc(-50% - 10px)) translateY(-40px) scale(1.4);}
  100%{opacity:0;transform:translateX(calc(-50% - 20px)) translateY(-60px) scale(1.8);}
}
@keyframes text{
  0%{transform: translateY(800px)}
}
@keyframes cracker {
  0%{transform: translate(0,0) scale(0); opacity: 1;}
  100%{transform: translate(var(--x), var(--y)) scale(1); opacity: 0;}
}